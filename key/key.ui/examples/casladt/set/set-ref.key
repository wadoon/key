\sorts {
    Nat \extends java.lang.Object;
    /*! @defaultValue(tip) */
    NatSet;
}
\functions {
    \unique Nat Nat(int);
    NatSet tip;
    NatSet bin(Nat, NatSet);
    NatSet remove(NatSet, Nat);
    boolean eqv(NatSet, NatSet);
    boolean contains(NatSet, Nat);
    int len(NatSet);
}
\axioms {
    natset_induction {
        \schemaVar \formula phi;
        \schemaVar \variable NatSet base;
        \schemaVar \variable Nat e;

        \find( ==> \forall base; phi )
        \varcond( \notFreeIn(e,phi) )

        "base case": \replacewith( ==>  {\subst base; tip} phi );
        "1. case": \replacewith( ==> \forall e; \forall base;  ( phi -> {\subst base; bin(e, base)} phi ) )
    };
    natset_ctor_split {
        \schemaVar \term NatSet natset;
        \schemaVar \skolemTerm Nat e;
        \schemaVar \skolemTerm NatSet els;
        \find(natset) \sameUpdateLevel
        \varcond(\new(e, \dependingOn(natset)), \new(els, \dependingOn(natset)))
        \replacewith(tip) \add(natset = tip ==>);
        \replacewith(bin(e, els)) \add(natset = bin(e, els) ==>)
    };
    eqv_tip_tip {
        \find( eqv(tip, tip) )
        \replacewith( true )
    };
    eqv_s1_s2_contains_s1_n {
        \schemaVar \term NatSet s1;
        \schemaVar \term NatSet s2;
        \find( eqv(s1, s2) )
	\replacewith( \if (\forall Nat n; contains(s1, n) = contains(s2,n)) \then (TRUE) \else (FALSE) )
    };
    contains_bin_n_s_n {
        \schemaVar \term NatSet s;
        \schemaVar \term Nat n;
        \find( contains(bin(n, s), n) )
        \replacewith( TRUE )
    };
    contains_bin_n1_s_n {
    	\schemaVar \term NatSet s;
	\schemaVar \term Nat n1,n2;
	\find( contains(bin(n1, s), n2) )
	\replacewith( contains(s, n2 ) )
    };
    contains_bin_n1_tip_n {
	\schemaVar \term Nat s;
	\find( contains( tip, s) )
	\replacewith( FALSE )
    };
    eq_NatSet_n1_n2 {
        \schemaVar \term NatSet n1;
        \schemaVar \term NatSet n2;
        \find( n1 = n2 )
        \replacewith( eqv(n1, n2) = TRUE )
    };
}
\problem {
	 bin(Nat(1),bin(Nat(2),bin(Nat(3),tip))) = bin(Nat(3),bin(Nat(2),bin(Nat(1),tip)))
}