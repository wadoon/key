\schemaVariables {
 \modalOperator { diamond, box, diamond_transaction, box_transaction } #allmodal;
 
 \formula post;

 \program NonSimpleExpression #nseBool;
 \program Statement #s;
 \program MethodName #mn;
 
 \program[list] SimpleExpression #selist;

 \program ExecutionContext #ex;
}

\rules(programRules:Java) {

//--------------- loops ------------------------------------------------------//

  // Simplifies a loop with a complex guard
  loopComplexToSimple {
    \find        (\modality{#allmodal}{.. while(#nseBool) #s ...}\endmodality(post))
  
    \replacewith (\modality{#allmodal}{
        .. #loop-complex-to-simple(while(#nseBool) #s); ...
    }\endmodality(post))
  
    \heuristics(simplify)
  };
  
//--------------- method calls ------------------------------------------//
  superRemoveForCompilation { 
    \find (\modality{#allmodal}{.#ex.. super.#mn(#selist); ...}\endmodality(post)) 
    \replacewith (\modality{#allmodal}{.. 
                            ...}\endmodality(post)) 
    \heuristics(simplify_autoname)
  };

}
