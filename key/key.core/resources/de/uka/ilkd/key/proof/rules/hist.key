\sorts {
	Event;
	EventType;
	MethodIdentifier;
}

\functions {
	//constructors
	//type, caller, callee, service, content, heap
	Event event(EventType, Object, Object, MethodIdentifier, Seq, Heap);
	\unique EventType serviceCall;
	\unique EventType serviceTermination;

	//destructors
	EventType evType(Event);
	Object evCaller(Event);
	Object evCallee(Event);
	MethodIdentifier evService(Event);
	Seq evContent(Event);
	Heap evHeap(Event);

	Seq filterInput(Seq);
	Seq filterVisible(Seq);
	Seq filterVisibleInternal(Seq);

	//other stuff
	Heap heapjoin(Heap, Heap, Seq);
	any isoObject(any);
}

\predicates {
    wfHist(Seq); // =? wellformedList

		wellformedList(Seq);
		wellformedListCoop(Seq);
		coopListEquiv(Seq, Seq);
		equivHistory(Seq,Seq);
		equivHistoryFiltered(Seq,Seq);
		equivEvent(Event, Event);
		equivEventLocal(Event, Event);
		equivEventGlobal(Event, Event);
		invEvent(Event);
		invEventLocal(Event);
		invEventGlobal(Event);
		isCallable(Event);

		agreePre(Heap, Heap);
		agreePreLocal(Heap, Heap);
		agreePreGlobal(Heap, Heap);
		agreePost(Heap, Heap);

    //similarities
    similarHist(Object, Seq, Seq);
    similarEvent(Event, Event);
    similar(any, any, Heap, Heap);

	//Helper predicates for recursive definitions
	wellformedListInternal(Seq);
	wellformedListCoopInternal(Seq);
	coopListEquivInternal(Seq, Seq);
	coopListEquivFilteredInternal(Seq, Seq);
	equivHistoryInternal(Seq,Seq);
	equivHistoryFilteredInternal(Seq,Seq);
	correspondingEvents(Event, Event);
	correspondingEventsCoop(Event, Event);

	//other stuff
	isIso(any, any);
	transfresh(any, Heap, Heap);
		agreeBasic(Seq, Seq);
}

\programVariables {
    Seq hist;
	Seq internalHist;
	Seq currentParams;
	Object environmentCaller;
	Object activeComponent;
}
