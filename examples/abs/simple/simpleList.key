// This file is part of KeY - Integrated Deductive Software Design
// Copyright (C) 2001-2009 Universitaet Karlsruhe, Germany
//                         Universitaet Koblenz-Landau, Germany
//                         Chalmers University of Technology, Sweden
//
// The KeY system is protected by the GNU General Public License. 
// See LICENSE.TXT for details.
// Input file for KeY standalone prover version 0.497

\absSource ".";

\module "VariableModule";

\class "VariableImpl";

\programVariables {
	ABS.StdLib.Int tot;
	ABS.StdLib.Int itemPrice;
	ABS.StdLib.Int old;
	ABS.StdLib.List test;
	ABS.StdLib.Bool coupon;
	VariableModule.Variable this;
}

\invariants(History historySV) {
  test:VariableModule.Variable {
      history = history	       
  };

}

\invariants(History historySV, Heap heapSV, any self) {
  classInvTest:VariableModule.VariableImpl {
      true & self = self 	       
  };

}


/*
   this.a == lastIndexIn(history, set@Variable, 1)   
*/

\problem {
  test = ABS.StdLib.List::Cons(2, ABS.StdLib.List::Nil) & tot>=0 & old = tot & itemPrice >= 0
  ->
  \[{ 
      test = Cons(1, Nil);
      tot = tot + itemPrice; 
      if (coupon) {
        tot = tot - itemPrice/10;
      }
    }\] (tot >= old & 1 = ABS.StdLib::head(test))
  
}


