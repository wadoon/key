package experiments;

public class Company {
   private Employee ceo;
   private Employee clerk;
   /*! clerk.salary | ceo.salary ; !*/

   /*@ requires ceo.salary > 0; @*/
   public void calculate(){
     int mod = mod1000(ceo.salary);
     int clerk_salary = 0;
     /*@ 
     @ loop_invariant (i>0)&&(i<=mod+1)&&(clerk_salary*2==i*(i-1));
     @ assignable clerk_salary, i;
     @ decreases mod-i;
     @*/
     for(int i = 1; i<=mod; i++)
        clerk_salary+=i;
     
     clerk.salary = clerk_salary;
   }   

   /*@ requires true;
     @ assignable \nothing;
     @ ensures (\result<1000) && 
     @            (\exists int i; i*1000+\result==x);
     @*/
   private int mod1000(int x){
     if (x<1000) 
       return x;
     else 
       return mod1000(x-1000);
   }
}
