package de.tud.exploitgen.util;

import de.uka.ilkd.key.logic.Term;

public abstract class AbstractExprTransformer {
	public String transformExpression2String(Term expression){ 	      
	      if(TermParser.isInteger(expression)){
	         return String.valueOf(TermParser.getIntegerValue(expression));
	      }
	      else if(TermParser.isLocationVariable(expression)){
	         return expression.toString();
	      }
	      else if(TermParser.isBooleanTrue(expression)){
	         return "true";
	      }
	      else if(TermParser.isBooleanFalse(expression)){
	         return "false";
	      }
	      else if(HeapHandler.isHeapSelectFunction(expression)){
	         return HeapHandler.getFieldNameOfSelect(expression, KEGConstant.SEPARATOR);                     
	      }  
	      else if(HeapHandler.isLengthFunction(expression)){
	         return HeapHandler.getVarName4LengthFunction(expression,KEGConstant.SEPARATOR);
	      }            
	      else if(TermParser.isBinaryFunction(expression)){
	         return "(" + 
	               transformExpression2String(expression.sub(0)) +
	               getBinaryOperatorString(expression) +
	               transformExpression2String(expression.sub(1)) +
	               ")";         
	      }
	      else if(TermParser.isUnaryFunction(expression)){
	         return "(" + 
	               getUnaryOperatorString(expression) +
	               transformExpression2String(expression.sub(0)) + 
	               ")";
	         
	      }
	      else if(KeYResourceHandler.isArtificialVariable(expression)){
	    	  return expression.toString();
	      }
	      
	      else if(TermParser.isExistsQuantifier(expression)){
	    	  return getExistsExpression(expression);
	      }
	      
	      else if(TermParser.isFunction(expression)){
	         return "(" +
	               
	               ")";
	      }else
	         return "";
	   }  
	
	public abstract String getBinaryOperatorString(Term expression);
	public abstract String getUnaryOperatorString(Term expression);
	public abstract String getExistsExpression(Term expression);
}
