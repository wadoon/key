package de.tud.exploitgen.detectleak.node;

import java.util.LinkedList;
import java.util.List;

import com.csvanefalk.keytestgen.core.model.implementation.KTGModel;

/**
 * @author: Do Huy
 * this class represents a tree of Model storing Models created by investigating a node
 * */
public class ModelTree {
   private KTGModel model;
   private List<ModelTree> children;
   
   
   /*default constructor*/
   public ModelTree(){
      this.model = KTGModel.constructModel();
      this.children = new LinkedList<ModelTree>();   
   }
   
   public ModelTree(KTGModel model){
      this.model = model;
      this.children = new LinkedList<ModelTree>();    
   }
   
   public void addChild(ModelTree mtree){
      children.add(mtree);
   }

   public KTGModel getModel() {
      return model;
   }

   public void setModel(KTGModel model) {
      this.model = model;
   }

   public List<ModelTree> getChildren() {
      return children;
   }

   public void setChilds(List<ModelTree> childs) {
      this.children = childs;
   }
   
   /*get all model of leaf nodes (ModelTree) of this ModelTree instance*/
   public List<KTGModel> getAllLeafModels(){      
      //performing tree traversal to get all leaf nodes      
      if(isLeaf()){
         List<KTGModel> result = new LinkedList<KTGModel>();
         result.add(model);
         return result;
      }else{
         List<KTGModel> result = new LinkedList<KTGModel>();
         for(ModelTree mt: children)
            result.addAll(mt.getAllLeafModels());
         return result;
      }               
   }
   
   public List<ModelTree> getAllLeafModelTrees(){
    //performing tree traversal to get all leaf nodes      
      if(isLeaf()){
         List<ModelTree> result = new LinkedList<ModelTree>();
         result.add(this);
         return result;
      }else{
         List<ModelTree> result = new LinkedList<ModelTree>();
         for(ModelTree mt: children)
            result.addAll(mt.getAllLeafModelTrees());
         return result;
      }    
   }
 
   public boolean isLeaf(){
      return (children.size()==0);         
   }

    
   
   public ModelTree getSmallestChild(){
      if(children.size()>0)
         return children.get(children.size()-1);
      else
         return null;
   }
   
}
